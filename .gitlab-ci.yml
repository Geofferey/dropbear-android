# Dropbear Android Gitlab Builder
# http://doc.gitlab.com/ce/ci/yaml/README.html
# https://hub.docker.com/_/debian/

when: manual
allow_failure: true

image: debian:latest

variables:
  TERM: xterm
  PUBLIC: bin
  INTERACTIVE: 0
 
before_script:
  - apt-get --quiet update --yes
  - apt-get --quiet install --yes wget xz-utils make binutils build-essential git
stages:
  - build

pages:
  stage: build
  only:
    - master
  script:
    - ./build.sh
    - mkdir -p "${PUBLIC}"
    - mv -v target/arm/* "${PUBLIC}/"
  artifacts:
    name: dropbear-android
    paths:
      - ${PUBLIC}
    expire_in: 1 day
 
